{"name": "test_galway_girl_youtube_result", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TargetClosedError: Page.wait_for_timeout: Target page, context or browser has been closed", "trace": "def test_galway_girl_youtube_result():\n        \"\"\"\n        Test to search for \"Galway Girl song\" on YouTube, capture results, and click the first relevant video.\n    \n        Flow:\n        1. Open YouTube\n        2. Search for \"Galway Girl song\"\n        3. Capture and print all visible search result titles and URLs\n        4. Identify the first YouTube result related to Galway Girl\n        5. Click that YouTube result link\n        6. Verify the navigation succeeds\n        \"\"\"\n        with sync_playwright() as p:\n            # Use Microsoft Edge (Chromium-based) browser\n            edge_path = r\"C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe\"\n            browser = p.chromium.launch(executable_path=edge_path, headless=False)\n            context = browser.new_context()\n            page = context.new_page()\n    \n            try:\n                # 1. Open YouTube\n                page.goto(\"https://www.youtube.com/\", timeout=20000)\n                page.wait_for_load_state(\"networkidle\", timeout=10000)\n    \n                # Handle any consent/cookie dialogs\n                try:\n                    consent = page.locator('button:has-text(\"Agree\")').first\n                    if consent.is_visible():\n                        consent.click()\n                except Exception:\n                    pass\n    \n                # 2. Search for \"Galway Girl song\"\n                # YouTube search box - try multiple selectors\n                search_box = None\n                selectors = [\n                    'input[id=\"search\"]',\n                    'input[name=\"search_query\"]',\n                    'input[aria-label=\"Search\"]',\n                    'input[placeholder*=\"Search\"]',\n                    'ytd-searchbox input'\n                ]\n    \n                for selector in selectors:\n                    try:\n                        elem = page.locator(selector).first\n                        elem.wait_for(timeout=5000)\n                        if elem.is_visible():\n                            search_box = elem\n                            print(f\"Found search box with selector: {selector}\")\n                            break\n                    except Exception:\n                        pass\n    \n                if not search_box:\n                    raise AssertionError(\"Could not find YouTube search box\")\n    \n                search_box.fill(\"Galway Girl song\")\n                search_box.press(\"Enter\")\n    \n                # Wait for search results to load\n                page.wait_for_selector('ytd-video-renderer', timeout=15000)\n    \n                # 3. Capture and print all visible search result titles and URLs\n                print(\"\\n\" + \"=\"*80)\n                print(\"YOUTUBE SEARCH RESULTS FOR: 'Galway Girl song'\")\n                print(\"=\"*80)\n    \n                # Get all video result containers\n                video_results = page.locator('ytd-video-renderer')\n                result_count = video_results.count()\n                print(f\"\\nTotal results found: {result_count}\\n\")\n    \n                results_data = []\n                for i in range(result_count):\n                    try:\n                        # Get title\n                        title_elem = video_results.nth(i).locator('#video-title')\n                        title = title_elem.inner_text()\n    \n                        # Get URL\n                        url_elem = video_results.nth(i).locator('a#video-title')\n                        url = url_elem.get_attribute('href')\n    \n                        # Make full YouTube URL if needed\n                        if url and not url.startswith('http'):\n                            url = f\"https://www.youtube.com{url}\"\n    \n                        results_data.append({\n                            'index': i + 1,\n                            'title': title,\n                            'url': url,\n                            'element': url_elem\n                        })\n    \n                        print(f\"{i+1}. {title}\")\n                        print(f\"   URL: {url}\\n\")\n                    except Exception as e:\n                        print(f\"Error extracting result {i+1}: {e}\\n\")\n    \n                # 4. Identify the first YouTube result (regardless of title)\n                assert len(results_data) > 0, \"No search results found.\"\n                first_result = results_data[0]\n    \n                print(\"=\"*80)\n                print(f\"CLICKING FIRST RESULT: {first_result['index']}. {first_result['title']}\")\n                print(f\"URL: {first_result['url']}\")\n                print(\"=\"*80)\n    \n                # 5. Click the first YouTube result link\n                with page.expect_navigation(timeout=15000):\n                    first_result['element'].click()\n    \n                # 6. Verify the navigation succeeds (page loads without error)\n                page.wait_for_load_state(\"networkidle\", timeout=15000)\n                assert \"youtube.com\" in page.url.lower(), f\"Did not navigate to YouTube, current URL: {page.url}\"\n                print(f\"\\n✓ Successfully navigated to: {page.url}\\n\")\n    \n                # Skip advertisements if present\n                print(\"=\"*80)\n                print(\"Handling advertisements...\")\n                print(\"=\"*80)\n    \n                try:\n                    # Wait a bit for ads to load\n                    page.wait_for_timeout(2000)\n    \n                    # Look for skip ad button (appears after 5 seconds usually)\n                    skip_ad_button = page.locator('button.ytp-ad-skip-button, .ytp-ad-skip-button-modern')\n    \n                    # Try to find and click skip button multiple times (ads might appear multiple times)\n                    max_attempts = 5\n                    for attempt in range(max_attempts):\n                        try:\n                            if skip_ad_button.is_visible(timeout=6000):\n                                print(f\"✓ Skip ad button found (attempt {attempt + 1}). Clicking...\")\n                                skip_ad_button.click()\n                                page.wait_for_timeout(1000)\n                            else:\n                                break\n                        except Exception as e:\n                            print(f\"No skip button found on attempt {attempt + 1}: {e}\")\n                            break\n    \n                    # Also try to close any remaining ad overlays\n                    close_button = page.locator('button[aria-label=\"Close ad\"]')\n                    if close_button.is_visible(timeout=2000):\n                        print(\"✓ Found close ad button. Clicking...\")\n                        close_button.click()\n    \n                except Exception as e:\n                    print(f\"Advertisement handling: {e}\")\n    \n                print(\"\\n✓ Advertisement skipped (if any were present)\\n\")\n    \n    \n                # Wait for at least 1 minute to view the page output\n                print(\"=\"*80)\n                print(\"Waiting for 1 minute to view the YouTube video page...\")\n                print(\"=\"*80)\n>               page.wait_for_timeout(60000)  # Wait 60 seconds (1 minute)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ngalway_girl.py:164: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n.venv\\Lib\\site-packages\\playwright\\sync_api\\_generated.py:11496: in wait_for_timeout\n    self._sync(self._impl_obj.wait_for_timeout(timeout=timeout))\n.venv\\Lib\\site-packages\\playwright\\_impl\\_page.py:1104: in wait_for_timeout\n    await self._main_frame.wait_for_timeout(timeout)\n.venv\\Lib\\site-packages\\playwright\\_impl\\_frame.py:844: in wait_for_timeout\n    await self._channel.send(\"waitForTimeout\", None, {\"waitTimeout\": timeout})\n.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x000001DF3D1493A0>\ncb = <function Channel.send.<locals>.<lambda> at 0x000001DF3D9ECE00>, is_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TargetClosedError: Page.wait_for_timeout: Target page, context or browser has been closed\n\n.venv\\Lib\\site-packages\\playwright\\_impl\\_connection.py:558: TargetClosedError"}, "description": "\n    Test to search for \"Galway Girl song\" on YouTube, capture results, and click the first relevant video.\n\n    Flow:\n    1. Open YouTube\n    2. Search for \"Galway Girl song\"\n    3. Capture and print all visible search result titles and URLs\n    4. Identify the first YouTube result related to Galway Girl\n    5. Click that YouTube result link\n    6. Verify the navigation succeeds\n    ", "start": 1771856396207, "stop": 1771856422837, "uuid": "34c7239b-ab84-4504-821f-2d0f74d6c6e9", "historyId": "99887620b6031ed8b61ab2cfda11468d", "testCaseId": "99887620b6031ed8b61ab2cfda11468d", "fullName": "galway_girl#test_galway_girl_youtube_result", "labels": [{"name": "suite", "value": "galway_girl"}, {"name": "host", "value": "DESKTOP-A5941F1"}, {"name": "thread", "value": "24556-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "galway_girl"}], "titlePath": ["galway_girl.py"]}